<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="keyword" content="麻雀, 麻将, 大会, 卓組, 組み合わせ" />
    <title>抜け番あり 1 人 6 戦 合計 7 戦 卓組作成方法 - 麻雀大会用卓組表</title>
  </head>
  <body bgcolor="#e0ffe0">
    <h1>抜け番あり 1 人 6 戦 合計 7 戦 卓組作成方法</h1>

    <h2>条件</h2>
    <ul>
      <li>4n + 2 人の選手がいる。</li>
      <li>試合枠を 7 戦分設定する。</li>
      <li>
        各選手は、そのうちの丁度 6 回に参加する。
        <ul>
          <li>最初の 6 戦は、それぞれについて、2 人が参加せず、その他の 4n 人が参加し、n 卓で行う。</li>
          <li>最後の 1 戦は、不参加を経験した 12 人が参加し、3 卓で行う。</li>
        </ul>
      </li>
      <li>どの選手も、同じ相手と複数回同卓しない。</li>
    </ul>

    <p>30 人 (n = 7) の例</p>
    <img src="images/nukeari_6_00.png" alt="30 人 (n = 7) の例" width="25%" height="25%" />

    <h2>方法</h2>

    <p>以下の条件を満たす卓組を用意します。</p>

    <ol>
      <li>n 卓の 4 チーム戦の (どの選手も同じ相手と複数回同卓しない) 卓組 6 戦分である。</li>
      <li>同じ卓を複数回使用する人がいない。</li>
      <li>別のチームに所属しており、かつ同卓しない 2 選手 (A, B) のペアが存在する。</li>
    </ol>
    <p>
      5 卓以下の場合は条件 1 を満たせず、6 卓の場合は条件 1, 3 を同時には満たせないため、7 卓以上で考えます。<br />
      7 卓以上である場合、<a href="4team_sen_method.html">4 チーム戦 卓組作成方法</a>で作った卓組の任意の 6 戦が条件 1, 3 を満たしています。<br />
      条件 2 を満たすためには、リンク先の ① で作ったものを使う場合は、全員の卓番号を、2 戦目は +1、3 戦目は +2、4 戦目は +3
      とずらすことでうまくいきます。<br />
      ② で作ったものを使う場合は、6 戦の抜き出し方や、各対戦の卓番号のずらす数をプログラムで全探索すると、うまく調整できます。<br />
      その後、以下の操作を行います。
    </p>

    <ol>
      <li>別のチームに所属しており、かつ同卓しない 2 選手 (A, B) のペアを見つける。</li>
      <li>A, B の所属チーム番号をそれぞれ teamA, teamB とする。</li>
      <li>s を 2 ～ 6 から一つ選び、s 戦目の A, B の卓番号をそれぞれ takuA, takuB とする。</li>
      <li>
        <b>以下の条件をすべて満たす場合、卓組を構成できるので次に進む。</b>そうでない場合、別の s を試す。どの s でも上手くいかない場合、2 選手 (A, B)
        を選び直す。

        <ul>
          <li>選手 A が 2 ～ 6 戦目で takuB を使用しない。</li>
          <li>選手 B が 2 ～ 6 戦目で takuA を使用しない。</li>
        </ul>
      </li>
      <li>
        4 チーム戦の卓組の末尾に 2 人を付け足す (これで合計が n 人になる)。
        <ul>
          <li>付け足した 1 人目の 1 戦目を「抜け番」とし、2 ～ 6 戦目に takuA を記入する。</li>
          <li>付け足した 2 人目の 1 戦目を「抜け番」とし、2 ～ 6 戦目に takuB を記入する。</li>
        </ul>
      </li>
      <li>
        以下をすべて「抜け番」に書き換える。
        <ul>
          <li>teamA チーム目の全ての対戦の 2 ～ 6 戦目の takuA</li>
          <li>teamB チーム目の全ての対戦の 2 ～ 6 戦目の takuB</li>
        </ul>
      </li>
      <li>
        卓組の右に 1 戦を付け足し、抜け番を経験した選手に、以下のように記入する。
        <ul>
          <li>A, B, 付け足した 2 人の合計 4 人に「卓番号 3」を記入する。</li>
          <li>残る teamA チーム目の選手 4 人に「卓番号 1」を記入する。</li>
          <li>残る teamB チーム目の選手 4 人に「卓番号 2」を記入する。</li>
        </ul>
      </li>
    </ol>

    <p>
      この操作で目的の卓組が必ず見つかる (=「どの (A, B) や s を選んでも操作 4 の条件を満たせない」現象に陥らない) ことは証明できていませんが、<br />
      <a href="index.html#4team_sen">当サイトに掲載している 4 チーム戦の卓組</a>に上記の操作を行った場合、7 ～ 30
      卓のすべてで目的の卓組を見つけることができました。<br />
      下の画像は、7 卓 30 人の場合の例です。<br />
      選手 A = 15, 選手 B = 20, 対戦 s = 6 を選んだときに目的の卓組となりました。<br />
      そのとき、teamA = 3, teamB = 4, takuA = 2, takuB = 1 でした。
    </p>

    <img src="images/nukeari_6_01.png" alt="7 卓の 4 チーム戦の卓組 6 戦分を元に 30 人 (n = 7) の抜け番あり 6 + 1 戦の卓組を作る例" />

    <details>
      <summary>どの選手も同じ相手と複数回同卓しないことの証明</summary>
      <ul>
        <li>
          6 戦目以前について、どの選手も同じ相手と複数回同卓しないことを以下のように示せます。
          <ul>
            <li>
              卓番号が書き入れられた、選手 n-1, n の 2 ～ 6 戦目部分のみを考えます。他の部分は、元の 4
              チーム戦の卓組がどの選手も同じ相手と複数回同卓しないものであるため、考える必要はありません。
            </li>
            <li>選手 n-1 は全て卓 takuA に、選手 n は全て卓 takuB につきます。</li>
            <li>
              選手 A と B は同卓しないため、takuA ≠ takuB です。 選手 n-1 は teamA を除く 3
              チームの選手と同卓しますが、元の卓組で同じ卓を複数回使用する人がいないため、同じ相手と複数回同卓しません。
            </li>
            <li>同様に、選手 n は teamB を除く 3 チームの選手と同卓しますが、同じ相手と複数回同卓しません。</li>
          </ul>
        </li>
        <li>
          7 戦目について、どの同卓する 2 人についても、1 ～ 6 戦目では同卓していないことを以下のように示せます。
          <ul>
            <li>卓番号が 1 である 4 人は、全員 takuA チーム目に所属しており、6 戦目以前にチーム内での同卓はないため、問題ありません。</li>
            <li>同様に、卓番号が 2 である 4 人は、全員 takuB チーム目に所属しており、問題ありません。</li>
            <li>
              卓番号が 3 である 4 人 (選手 A, B, n-1, n) について考えます。
              <ul>
                <li>
                  選手 A, B: 元の卓組で同卓しないような 2 人を選んでおり、6 戦目以前で両選手の卓番号を (消去して抜け番にしてはいるものの)
                  新たに書き入れていないので、同卓しません。
                </li>
                <li>選手 n-1, n: ta ≠ tb なので同卓しません。</li>
                <li>選手 A, n-1: 操作 6 より、選手 A は takuA につくことがなく、選手 n-1 は (抜け番以外で) 常に takuA に入るため、同卓しません。</li>
                <li>選手 B, n: 操作 6 より、選手 B は takuB につくことがなく、選手 n は (抜け番以外で) 常に takuB に入るため、同卓しません。</li>
                <li>
                  選手 A, n: 操作 4 の条件より、選手 A は takuB につくことがなく、選手 n は (抜け番以外で) 常に takuB に入るため、同卓しません。
                </li>
                <li>
                  選手 B, n-1: 操作 4 の条件より、選手 B は takuA につくことがなく、選手 n-1 は (抜け番以外で) 常に takuB に入るため、同卓しません。
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>よって、どの選手も、同じ相手と複数回同卓しません。</li>
      </ul>
    </details>

    <h2>補足</h2>

    <ul>
      <li>
        当サイトに掲載している卓組は、上記の方法で作成した後に、以下の操作を複数回行っている場合があります。
        <ul>
          <li>卓番号の入れ替え (例: 1 戦目の卓番号 1 を 2 に、2 を 3 に、3 を 1 に全て書き換えている)</li>
          <li>選手番号の入れ替え</li>
          <li>対戦番号の入れ替え</li>
        </ul>
      </li>
      <li>今後、それぞれの手法のソースコード (Python) とその実行時間を掲載する予定です。</li>
    </ul>

    <br />
    <a href="index.html#nukeari_6and1_sen">卓組一覧「抜け番あり 1 人 6 戦 合計 7 戦」へ戻る</a>
  </body>
</html>
