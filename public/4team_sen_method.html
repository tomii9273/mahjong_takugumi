<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="keyword" content="麻雀, 麻将, 大会, 卓組, 組み合わせ" />
    <title>4チーム戦 卓組作成方法 - 麻雀大会用卓組表</title>
  </head>
  <body bgcolor="#e0ffe0">
    <h1>4チーム戦 卓組作成方法</h1>

    <h2>条件</h2>
    <ul>
      <li>n 卓 4n 人の選手がいる。</li>
      <li>チーム A, B, C, D があり、それぞれ n 人が所属する。</li>
      <li>対戦で、同じチームの選手同士の同卓はない。すなわち、各卓にチーム A, B, C, D からそれぞれ 1 人ずつが座る。</li>
      <li>どの選手も、同じ相手と複数回同卓しない。</li>
    </ul>
    <p>卓数 n が 3 以下の場合、3 番目の条件を満たせないため、4 卓以上で考えます。</p>

    <h2>下記 ①, ② 共通の方法</h2>
    <p>
      縦軸に選手番号、横軸に対戦番号をとり、交差する場所に卓番号を入れる卓組表を考えます。<br />
      選手番号は、チームごとに固めます (先頭 4 分の 1 である選手 1 ～ n がチーム A, その次の 4 分の 1 がチーム B, ...)。<br />
      冒頭の条件を満たすには、「あるチーム (n 人) と、ある対戦が交わる n マス」それぞれに (同じ相手と複数回同卓しないようにしつつ) 1 ～ n
      までの卓番号を入れていけばよいです。<br />
      下の画像は 7 卓 28 人 7 戦の例です。黒い太枠それぞれに、1 ～ 7 までの卓番号をうまく入れられればよいです。
    </p>
    <img src="images/4team_00.png" alt="7 卓 28 人 7 戦の場合の具体例 (卓番号を入れる前)" />

    <h2>① 卓数 n が 2 の倍数でも 3 の倍数でもない場合</h2>

    <p>容易に n 戦 (他チームの全員と同卓できる) の卓組を構成できる方法があり、それを使用しました。</p>
    <ul>
      <li>まず、一番左の列 (1 戦目) と一番上の段 (チーム A) には、すべて「1, 2, 3, ..., n」を入れる。</li>
      <li>チーム B の 2 戦目以降には、1 つ前の対戦から <b>1 つ</b>卓番号を増やしたもの (*) を順番に入れていく (2 戦目なら「2, 3, ..., n, 1」)。</li>
      <li>チーム C の 2 戦目以降には、1 つ前の対戦から <b>2 つ</b>卓番号を増やしたもの (*) を順番に入れていく (2 戦目なら「3, 4, ..., 1, 2」)。</li>
      <li>チーム D の 2 戦目以降には、1 つ前の対戦から <b>3 つ</b>卓番号を増やしたもの (*) を順番に入れていく (2 戦目なら「4, 5, ..., 2, 3」)。</li>
      <li>(*) n の後を 1 とする。</li>
    </ul>
    <p>
      この構成方法で同じ相手と複数回同卓しないことは、数学的に証明できます。<br />
      下の画像は 7 卓 28 人 7 戦の例です。<br />
      この方法で作ったと思われる卓組表を麻雀大会等でよく見るので、広く使われている方法かもしれません (チーム分けを無視すれば、個人戦にも使えます)。
    </p>
    <img src="images/4team_01.png" alt="7 卓 28 人 7 戦の場合の具体例 (卓番号を入れた後)" />

    <h2>② 卓数 n が 2 か 3 の倍数である場合 (ただし n ≠ 4)</h2>
    <p>
      上記 ① の方法で n 戦分を作ろうとすると、同じ相手との複数回の同卓が発生します。<br />
      下の画像は 6 卓 24 人 6 戦の卓組を作ろうとした例ですが、チーム A・D の 1・3 戦目などで複数回の同卓が発生していることがわかります。
    </p>
    <img src="images/4team_02.png" alt="6 卓 24 人 6 戦の卓組を作ろうとした際の失敗例" />
    <p>
      各「黒い太枠」について、1 ～ n の番号の入れ方の全パターンを探索するプログラムを組むことができますが、1 ～ n の並べ替え方は n! 通りであり、それを
      10 個以上もとなると、n が 6 程度であっても、全パターンを探索するのは現実的ではありません。<br />
      そのため、本手法では「1, 2, ..., n-1, n」「2, 3, ..., n, 1」のような、1 ずつ増加する (n の後を 1 とする) 列 (すなわち、上記 ①
      で登場したような列) に限定して、プログラムによる全探索を実施しました。<br />
      並べ替え方を限定することで条件を満たすパターンを見逃してしまう可能性もありますが、現実的な時間での探索が可能になりました。<br />
      結果として、最高で n 戦 (n = 15 などの場合)、最低で n-2 戦 (n = 9 の場合) の卓組を作ることができました。
    </p>

    <h2>③ 卓数 n が 4 の場合</h2>
    <p>
      個人戦 (総当たり戦) の 4 卓 16 人 5 戦の卓組について、1 戦目の卓番号をチーム番号と見なして、残り 4 戦のみを行うことで、4 チーム戦としました。
    </p>

    <h2>補足</h2>
    <ul>
      <li>
        当サイトに掲載している卓組は、上記の方法で作成した後に、卓番号の入れ替えを行っている (例: 1 戦目の卓番号 1 を 2 に、2 を 3 に、3 を 1
        に全て書き換えている) 場合があります。入れ替えの操作をしても、同卓する相手は変わりません。
      </li>
      <li>今後、それぞれの手法のソースコード (Python) とその実行時間を掲載する予定です。</li>
    </ul>

    <br />
    <a href="index.html#4team_sen">卓組一覧「4チーム戦用」へ戻る</a>
  </body>
</html>
